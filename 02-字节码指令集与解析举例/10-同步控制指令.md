# 同步控制指令

> ### 线程同步
>
> montiorenter 进入并获取对象监视器。即：为栈顶对象加锁
>
> monitorexit 释放并退出对象监视器。即：为栈顶对象解锁

Java虚拟机支持两种同步结构：方法级的同步和方法内部一段指令序列的同步，这两种同步都是使用monitor来支持的

## 1. 方法级的同步

![img](https://gitee.com/vectorx/ImageCloud/raw/master/img/20210425232905.png)

```java
private int i = 0;
public synchronized void add() {
	i++;
}
```

![img](https://gitee.com/vectorx/ImageCloud/raw/master/img/20210425232535.png)
![img](https://gitee.com/vectorx/ImageCloud/raw/master/img/20210425232550.png)

## 2. 方法内指令指令序列的同步

![img](https://gitee.com/vectorx/ImageCloud/raw/master/img/20210425232648.png)
![img](https://gitee.com/vectorx/ImageCloud/raw/master/img/20210425232654.png)
![img](https://gitee.com/vectorx/ImageCloud/raw/master/img/20210425232701.png)
![img](https://gitee.com/vectorx/ImageCloud/raw/master/img/20210425232710.png)